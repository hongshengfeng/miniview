<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
		<title>图片裁剪</title>
		<link rel="stylesheet" href="../css/mui.min.css" />
		<link rel="stylesheet" href="../css/iconfont.min.css" />
		<link rel="stylesheet" href="../css/cropper.min.css" />
		<style>
			html,
			body {
				width: 100%;
				height: 100%;
				background-color: #24292d;
			}
			
			.mui-bar,
			.mui-content {
				background-color: #24292d;
			}
			
			.mui-bar-nav {
				box-shadow: none;
			}
			
			.mui-content {
				width: 100%;
				height: 50%;
			}
			
			.container {
				max-width: 100%;
				margin: 25% 0 5% 0;
				height: 100%;
			}
			
			img {
				max-width: 100%;
				max-height: 100%;
			}
			
			.cropper-modal {
				background-color: #747474;
			}
			
			.cropper-point,
			.cropper-line {
				background-color: #f68531;
			}
			
			.cropper-view-box {
				outline: 1px solid #f68531;
			}
			
			.cropper-point.point-se {
				height: 8px;
				width: 20px;
			}
			
			.button {
				margin-top: 20%;
				width: 100%;
				text-align: center;
			}
			
			.button button {
				width: 140px;
				border-radius: 20px;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		</header>
		<div class="mui-content">
			<div class="container">
				<img id="image" src="">
			</div>
			<div class="button">
				<button type="button" class="mui-btn mui-btn-primary mui-btn-outlined">
					裁剪
				</button>
			</div>
		</div>
	</body>
	<script type="text/javascript" src="../js/mui.min.js"></script>
	<script type="text/javascript" src="../js/cropper.min.js"></script>
	<script>
		mui.init();
		
		var img = "";
		mui.plusReady(function() {
			//获取传递过来的账号
			var self = plus.webview.currentWebview();
			img = self.img;
			document.getElementById("image").src = img;
			crop();
		});
		
		var crop = function(){
			var image = document.querySelector('#image');
			var cropper = new Cropper(image, {
				dragMode:"move",
				aspectRatio: 120 / 179,
				autoCropArea: 1,
				background: false,
				restore: false,
				toggleDragModeOnDblclick: false,
			});
		}
	</script>

</html>